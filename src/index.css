@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-primary: 59 130 246;
  --color-secondary: 99 102 241;
  --color-accent: 236 72 153;
  --color-background: 249 250 251;
  --color-surface: 255 255 255;
  --color-text: 31 41 55;
  --color-border: 229 231 235;
}

.dark {
  --color-primary: 96 165 250;
  --color-secondary: 129 140 248;
  --color-accent: 244 114 182;
  --color-background: 17 24 39;
  --color-surface: 31 41 55;
  --color-text: 243 244 246;
  --color-border: 75 85 99;
}

/* ==================== BASE OPTIMISÃ‰E POUR MOBILE ==================== */
body {
  font-family: 'Poppins', sans-serif;
  @apply bg-background text-text;
  
  /* ðŸ”§ MOBILE : Optimisations pour viewport mobile */
  @media (max-width: 768px) {
    /* EmpÃªche le zoom automatique sur les inputs */
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    
    /* AmÃ©liore le rendu des polices sur mobile */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    
    /* Support pour les safe areas */
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
  }
}

.font-report {
  font-family: 'Lato', 'Calibri', 'Arial', sans-serif;
}

/* ==================== VARIABLES CSS POUR COMPATIBILITÃ‰ MOBILE ==================== */
:root {
  /* Variables existantes... */
  
  /* ðŸ”§ AJOUT : Variables pour mobile */
  --mobile-header-height: 60px;
  --desktop-header-height: 70px;
  --mobile-padding: 0.5rem;
  --desktop-padding: 1rem;
  --touch-target-size: 44px;
  
  /* Variables pour les hauteurs dynamiques */
  --real-vh: 1vh;
  --container-height: calc(100vh - var(--desktop-header-height));
}

@media (max-width: 768px) {
  :root {
    --container-height: calc(100vh - var(--mobile-header-height));
    /* Support pour dvh si disponible */
    --container-height: calc(100dvh - var(--mobile-header-height));
  }
}

@layer components {
  /* ==================== CONTAINER GLOBAL OPTIMISÃ‰ ==================== */
  .container {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8;
    max-width: 100%;
    
    /* ðŸ”§ MOBILE : Padding rÃ©duit */
    @media (max-width: 768px) {
      @apply px-2;
    }
  }

  /* ==================== CARDS RESPONSIVES ==================== */
  .card {
    @apply bg-surface rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg border border-blue-100 dark:border-gray-700;
    
    /* ðŸ”§ MOBILE : Adaptation pour mobile */
    @media (max-width: 768px) {
      @apply rounded-xl shadow-sm;
      border-width: 1px;
      
      /* Supprime l'effet hover sur mobile */
      &:hover {
        @apply shadow-sm;
      }
    }
  }

  /* ==================== BUTTONS OPTIMISÃ‰S POUR MOBILE ==================== */
  .btn {
    @apply px-6 py-2 rounded-md font-medium text-white transition-all duration-300 transform hover:translate-y-[-2px] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background uppercase tracking-wider text-sm shadow-md;
    
    /* ðŸ”§ MOBILE : Taille tactile optimale */
    @media (max-width: 768px) {
      @apply px-4 py-3 text-base rounded-lg;
      min-height: var(--touch-target-size);
      min-width: var(--touch-target-size);
      
      /* Supprime les transformations sur mobile */
      &:hover {
        transform: none;
      }
      
      /* AmÃ©liore l'accessibilitÃ© tactile */
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
  }

  .btn-primary {
    @apply bg-primary hover:bg-blue-600 focus:ring-primary;
    
    @media (max-width: 768px) {
      &:hover {
        @apply bg-primary;
      }
    }
  }

  .btn-secondary {
    @apply bg-secondary hover:bg-indigo-600 focus:ring-secondary;
    
    @media (max-width: 768px) {
      &:hover {
        @apply bg-secondary;
      }
    }
  }

  /* ==================== INPUTS OPTIMISÃ‰S POUR MOBILE ==================== */
  .input {
    @apply w-full px-4 py-2 rounded-md border-2 border-blue-200 dark:border-gray-600 bg-surface text-text focus:border-blue-400 dark:focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-700 focus:ring-opacity-50 transition-all duration-300 placeholder-gray-400 dark:placeholder-gray-500;
    
    /* ðŸ”§ MOBILE : Optimisations pour mobile */
    @media (max-width: 768px) {
      @apply px-3 py-3 text-base rounded-lg;
      min-height: var(--touch-target-size);
      
      /* Ã‰vite le zoom automatique sur iOS */
      font-size: 16px;
      
      /* AmÃ©liore l'apparence sur mobile */
      -webkit-appearance: none;
      appearance: none;
    }
  }

  .select {
    @apply w-full px-4 py-2 rounded-md border-2 border-blue-200 dark:border-gray-600 bg-surface text-text focus:border-blue-400 dark:focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-700 focus:ring-opacity-50 transition-all duration-300 appearance-none;
    
    /* ðŸ”§ MOBILE : Optimisations pour mobile */
    @media (max-width: 768px) {
      @apply px-3 py-3 text-base rounded-lg;
      min-height: var(--touch-target-size);
      font-size: 16px;
    }
  }

  /* ==================== QUESTION CARDS RESPONSIVES ==================== */
  .question-card {
    @apply bg-surface rounded-lg shadow-sm p-6 mb-6 transition-all duration-300 hover:shadow-md border-l-4 border-blue-400 dark:border-blue-600;
    width: 100%;
    min-width: 300px;
    overflow-x: auto;
    
    /* ðŸ”§ MOBILE : Adaptation pour mobile */
    @media (max-width: 768px) {
      @apply p-4 mb-4 rounded-xl shadow-none border-l-2;
      min-width: 0;
      
      &:hover {
        @apply shadow-none;
      }
    }
  }

  .option-card {
    @apply bg-blue-50 dark:bg-gray-700 rounded-md p-4 mb-3 transition-all duration-300 hover:bg-blue-100 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600;
    
    /* ðŸ”§ MOBILE : Adaptation pour mobile */
    @media (max-width: 768px) {
      @apply p-3 mb-2 rounded-lg;
      min-height: var(--touch-target-size);
      
      &:hover {
        @apply bg-blue-50 dark:bg-gray-700;
      }
    }
  }

  .sub-question {
    @apply ml-6 mt-4 border-l-2 border-indigo-300 dark:border-indigo-600 pl-4;
    
    /* ðŸ”§ MOBILE : RÃ©duction des marges */
    @media (max-width: 768px) {
      @apply ml-3 mt-3 pl-3;
    }
  }

  /* ==================== HEADER RESPONSIVE ==================== */
  .header {
    @apply bg-blue-600 dark:bg-gray-800 text-white shadow-md sticky top-0 z-50;
    height: var(--desktop-header-height);
    
    /* ðŸ”§ MOBILE : Hauteur ajustÃ©e */
    @media (max-width: 768px) {
      height: var(--mobile-header-height);
    }
  }

  .header-content {
    @apply container mx-auto py-4 flex justify-between items-center;
    
    /* ðŸ”§ MOBILE : Padding rÃ©duit */
    @media (max-width: 768px) {
      @apply py-3 px-4;
    }
  }

  .header-title {
    @apply text-3xl font-bold;
    
    /* ðŸ”§ MOBILE : Taille rÃ©duite */
    @media (max-width: 768px) {
      @apply text-xl;
    }
  }

  .header-nav {
    @apply flex space-x-6;
    
    /* ðŸ”§ MOBILE : Espacement rÃ©duit */
    @media (max-width: 768px) {
      @apply space-x-3;
    }
  }

  .header-link {
    @apply text-white hover:text-blue-200 dark:hover:text-blue-300 transition-colors duration-300 uppercase tracking-wider text-sm font-medium;
    min-height: var(--touch-target-size);
    
    /* ðŸ”§ MOBILE : Optimisations tactiles */
    @media (max-width: 768px) {
      @apply text-xs;
      display: flex;
      align-items: center;
      padding: 0.5rem;
      touch-action: manipulation;
      
      &:hover {
        @apply text-white;
      }
    }
  }

  /* ==================== MAIN TITLE RESPONSIVE ==================== */
  .main-title {
    @apply text-4xl font-bold text-center mb-12 text-gray-800 dark:text-gray-200;
    
    /* ðŸ”§ MOBILE : Taille et marges ajustÃ©es */
    @media (max-width: 768px) {
      @apply text-2xl mb-6;
    }
  }

  /* ==================== QUESTIONNAIRE LAYOUT RESPONSIVE ==================== */
  .questionnaire-layout {
    @apply flex flex-wrap;
    
    /* ðŸ”§ MOBILE : Force la colonne */
    @media (max-width: 768px) {
      @apply flex-col;
    }
  }

  .questionnaire-creator {
    @apply w-full lg:w-7/12 pr-0 lg:pr-4 mb-8 lg:mb-0;
    
    /* ðŸ”§ MOBILE : Largeur complÃ¨te */
    @media (max-width: 768px) {
      @apply w-full pr-0 mb-4;
    }
  }

  .questionnaire-preview {
    @apply w-full lg:w-5/12 pl-0 lg:pl-4;
    
    /* ðŸ”§ MOBILE : Largeur complÃ¨te */
    @media (max-width: 768px) {
      @apply w-full pl-0;
    }
  }

  /* Classes pour le texte des options en mode sombre */
  .questionnaire-option {
    @apply text-gray-700 dark:text-white;
  }
}

/* ==================== GLOBAL STYLES POUR MOBILE ==================== */
u {
  text-decoration: underline;
}

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
  
  /* ðŸ”§ MOBILE : Support pour les hauteurs dynamiques */
  @media (max-width: 768px) {
    /* Fix pour iOS qui change la hauteur avec la barre d'URL */
    height: 100vh;
    height: -webkit-fill-available;
    
    /* AmÃ©liore la performance sur mobile */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: none;
  }
}

body {
  overflow-y: auto; /* Permet le dÃ©filement vertical */
  
  /* ðŸ”§ MOBILE : Gestion du scroll optimisÃ©e */
  @media (max-width: 768px) {
    /* EmpÃªche le bounce sur iOS quand le menu est ouvert */
    &.menu-open {
      overflow: hidden;
      position: fixed;
      width: 100%;
    }
  }
}

#root {
  display: flex;
  flex-direction: column;
  
  /* ðŸ”§ MOBILE : Assure que l'app remplit l'Ã©cran */
  @media (max-width: 768px) {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* ==================== CLASSES UTILITAIRES MOBILE ==================== */
@media (max-width: 768px) {
  /* Cache sur mobile */
  .mobile-hidden {
    display: none !important;
  }
  
  /* Affiche seulement sur mobile */
  .mobile-only {
    display: block;
  }
  
  /* Largeur complÃ¨te sur mobile */
  .mobile-full-width {
    width: 100% !important;
  }
  
  /* Stack vertical sur mobile */
  .mobile-stack {
    display: flex !important;
    flex-direction: column !important;
    gap: var(--mobile-padding) !important;
  }
  
  /* Padding mobile */
  .mobile-padding {
    padding: var(--mobile-padding) !important;
  }
  
  /* Hauteur complÃ¨te mobile */
  .mobile-full-height {
    height: 100vh !important;
    height: 100dvh !important;
  }
}

/* Cache par dÃ©faut les Ã©lÃ©ments mobile-only */
@media (min-width: 769px) {
  .mobile-only {
    display: none;
  }
  
  /* Cache sur desktop */
  .desktop-hidden {
    display: none !important;
  }
}

/* ==================== AMÃ‰LIORATION DES PERFORMANCES MOBILE ==================== */
@media (max-width: 768px) {
  /* AmÃ©liore les performances des animations */
  * {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  /* Optimise les images */
  img {
    image-rendering: auto;
    image-rendering: -webkit-optimize-contrast;
  }
  
  /* AmÃ©liore le rendu des Ã©lÃ©ments interactifs */
  button, a, [role="button"], .clickable {
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  /* Optimise les zones de scroll */
  .scroll-container {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
}

/* ==================== SUPPORT POUR LES SAFE AREAS (iPhone X+) ==================== */
@media (max-width: 768px) {
  .safe-area-padding {
    padding-left: env(safe-area-inset-left, 0px);
    padding-right: env(safe-area-inset-right, 0px);
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0px);
  }
}

/* ==================== ACCESSIBILITY AMÃ‰LIORÃ‰E POUR MOBILE ==================== */
@media (max-width: 768px) {
  /* AmÃ©liore la visibilitÃ© du focus */
  :focus-visible {
    outline: 3px solid rgb(var(--color-accent));
    outline-offset: 3px;
  }
  
  /* Assure une taille tactile minimale */
  button, a, input, select, textarea {
    min-height: var(--touch-target-size);
    min-width: var(--touch-target-size);
  }
}

/* ==================== ORIENTATION LANDSCAPE MOBILE ==================== */
@media (max-width: 768px) and (orientation: landscape) {
  :root {
    --mobile-header-height: 50px;
    --container-height: calc(100vh - 50px);
    --container-height: calc(100dvh - 50px);
  }
  
  /* RÃ©duit les espaces en paysage */
  .mobile-padding {
    padding: 0.25rem !important;
  }
  
  /* Ajuste les textes en paysage */
  .main-title {
    @apply text-xl mb-4;
  }
}

@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';