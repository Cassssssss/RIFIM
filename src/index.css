@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-primary: 59 130 246;
  --color-secondary: 99 102 241;
  --color-accent: 236 72 153;
  --color-background: 249 250 251;
  --color-surface: 255 255 255;
  --color-text: 31 41 55;
}

.dark {
  --color-primary: 96 165 250;
  --color-secondary: 129 140 248;
  --color-accent: 244 114 182;
  --color-background: 17 24 39;
  --color-surface: 31 41 55;
  --color-text: 243 244 246;
}

/* ============ BASE STYLES AVEC SUPPORT MOBILE ============ */
body {
  font-family: 'Poppins', sans-serif;
  @apply bg-background text-text;
  /* Support pour l'overscroll sur mobile */
  overscroll-behavior: none;
  /* Améliore la performance sur mobile */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.font-report {
  font-family: 'Lato', 'Calibri', 'Arial', sans-serif;
}

/* ============ RESPONSIVE CONTAINER SYSTEM ============ */
@layer components {
  .container {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8;
    max-width: 100%;
  }

  /* ============ RESPONSIVE CARDS ============ */
  .card {
    @apply bg-surface rounded-lg shadow-md overflow-hidden transition-all duration-300 hover:shadow-lg border border-blue-100 dark:border-gray-700;
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
      @apply rounded-md shadow-sm;
      /* Réduit les ombres sur mobile pour améliorer les performances */
    }
  }

  /* ============ RESPONSIVE BUTTONS ============ */
  .btn {
    @apply px-6 py-2 rounded-md font-medium text-white transition-all duration-300 transform hover:translate-y-[-2px] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background uppercase tracking-wider text-sm shadow-md;
    
    /* Mobile touch optimizations */
    @media (max-width: 768px) {
      @apply px-4 py-3 text-base;
      /* Plus gros sur mobile pour une meilleure accessibilité tactile */
      min-height: 44px; /* Minimum Apple/Google recommandé pour le tactile */
      
      /* Supprime les effets de hover sur mobile qui peuvent poser problème */
      &:hover {
        transform: none;
      }
    }
  }

  .btn-primary {
    @apply bg-primary hover:bg-blue-600 focus:ring-primary;
  }

  .btn-secondary {
    @apply bg-secondary hover:bg-indigo-600 focus:ring-secondary;
  }

  /* ============ RESPONSIVE INPUTS ============ */
  .input {
    @apply w-full px-4 py-2 rounded-md border-2 border-blue-200 dark:border-gray-600 bg-surface text-text focus:border-blue-400 dark:focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-700 focus:ring-opacity-50 transition-all duration-300 placeholder-gray-400 dark:placeholder-gray-500;
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
      @apply px-3 py-3 text-base;
      /* Empêche le zoom automatique sur iOS */
      font-size: 16px;
      min-height: 44px;
    }
  }

  .select {
    @apply w-full px-4 py-2 rounded-md border-2 border-blue-200 dark:border-gray-600 bg-surface text-text focus:border-blue-400 dark:focus:border-blue-300 focus:ring focus:ring-blue-200 dark:focus:ring-blue-700 focus:ring-opacity-50 transition-all duration-300 appearance-none;
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
      @apply px-3 py-3 text-base;
      font-size: 16px;
      min-height: 44px;
    }
  }

  /* ============ RESPONSIVE QUESTION CARDS ============ */
  .question-card {
    @apply bg-surface rounded-lg shadow-sm p-6 mb-6 transition-all duration-300 hover:shadow-md border-l-4 border-blue-400 dark:border-blue-600;
    width: 100%;
    min-width: 300px;
    overflow-x: auto;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply p-4 mb-4 rounded-md;
      min-width: 100%;
      /* Scroll horizontal amélioré */
      -webkit-overflow-scrolling: touch;
    }
  }

  .option-card {
    @apply bg-blue-50 dark:bg-gray-700 rounded-md p-4 mb-3 transition-all duration-300 hover:bg-blue-100 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600;
    
    /* Mobile touch optimization */
    @media (max-width: 768px) {
      @apply p-3 mb-2;
      min-height: 44px;
      display: flex;
      align-items: center;
    }
  }

  .sub-question {
    @apply ml-6 mt-4 border-l-2 border-indigo-300 dark:border-indigo-600 pl-4;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply ml-3 pl-3;
    }
  }

  /* ============ RESPONSIVE HEADER ============ */
  .header {
    @apply bg-blue-600 dark:bg-gray-800 text-white shadow-md sticky top-0 z-50;
    /* Mobile: header fixe pour une meilleure navigation */
  }

  .header-content {
    @apply container mx-auto py-4 flex justify-between items-center;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply py-3 px-4;
    }
  }

  .header-title {
    @apply text-3xl font-bold;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply text-2xl;
    }
  }

  .header-nav {
    @apply flex space-x-6;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply space-x-4;
    }
  }

  .header-link {
    @apply text-white hover:text-blue-200 dark:hover:text-blue-300 transition-colors duration-300 uppercase tracking-wider text-sm font-medium;
    
    /* Mobile touch optimization */
    @media (max-width: 768px) {
      @apply text-xs py-2 px-1;
      min-height: 44px;
      display: flex;
      align-items: center;
    }
  }

  /* ============ RESPONSIVE MAIN TITLE ============ */
  .main-title {
    @apply text-4xl font-bold text-center mb-12 text-gray-800 dark:text-gray-200;
    
    /* Mobile responsive */
    @media (max-width: 768px) {
      @apply text-2xl mb-6;
    }
  }

  /* ============ RESPONSIVE QUESTIONNAIRE LAYOUT ============ */
  .questionnaire-layout {
    @apply flex flex-wrap;
    
    /* Mobile: force la disposition en colonne */
    @media (max-width: 1024px) {
      @apply flex-col;
    }
  }

  .questionnaire-creator {
    @apply w-full lg:w-7/12 pr-0 lg:pr-4 mb-8 lg:mb-0;
    
    /* Mobile responsive */
    @media (max-width: 1024px) {
      @apply w-full pr-0 mb-6;
    }
  }

  .questionnaire-preview {
    @apply w-full lg:w-5/12 pl-0 lg:pl-4;
    
    /* Mobile responsive */
    @media (max-width: 1024px) {
      @apply w-full pl-0;
    }
  }

  /* ============ OPTION TEXT MOBILE ============ */
  .questionnaire-option {
    @apply text-gray-700 dark:text-white;
    
    /* Mobile: taille de texte appropriée */
    @media (max-width: 768px) {
      font-size: 16px; /* Évite le zoom sur iOS */
      line-height: 1.5;
    }
  }

  /* ============ MOBILE MEDIA QUERIES GLOBALES ============ */
  @media (max-width: 768px) {
    .questionnaire-layout {
      @apply flex-col;
    }
    
    .questionnaire-creator,
    .questionnaire-preview {
      @apply w-full;
    }
    
    /* Espacement mobile optimisé */
    .container {
      @apply px-3;
    }
    
    /* Grilles responsive */
    .grid {
      @apply grid-cols-1;
    }
    
    /* Tables responsive */
    .table-responsive {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Modals mobile */
    .modal {
      @apply mx-2;
      max-height: 90vh;
      overflow-y: auto;
    }
  }
  
  /* ============ TABLET BREAKPOINT ============ */
  @media (min-width: 769px) and (max-width: 1024px) {
    .grid-tablet-2 {
      @apply grid-cols-2;
    }
    
    .questionnaire-layout {
      @apply flex-col;
    }
  }
}

/* ============ GLOBAL MOBILE OPTIMIZATIONS ============ */
u {
  text-decoration: underline;
}

html, body, #root {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  overflow-y: auto; /* Permet le défilement vertical */
  
  /* Mobile scroll optimizations */
  @media (max-width: 768px) {
    /* Améliore le scroll sur mobile */
    -webkit-overflow-scrolling: touch;
    /* Empêche le bounce sur iOS */
    overscroll-behavior-y: none;
  }
}

#root {
  display: flex;
  flex-direction: column;
  
  /* Mobile: assure une hauteur correcte */
  @media (max-width: 768px) {
    min-height: 100vh;
    min-height: -webkit-fill-available; /* Fix pour iOS */
  }
}

/* ============ MOBILE SCROLL IMPROVEMENTS ============ */
/* Améliore les scrollbars sur mobile */
@media (max-width: 768px) {
  ::-webkit-scrollbar {
    width: 0;
    background: transparent;
  }
  
  /* Cache les scrollbars sur mobile tout en gardant la fonctionnalité */
  * {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
}

/* ============ MOBILE TOUCH IMPROVEMENTS ============ */
@media (max-width: 768px) {
  /* Améliore les interactions tactiles */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation;
  }
  
  /* Empêche la sélection de texte accidentelle */
  .no-select-mobile {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Améliore les performances d'animation sur mobile */
  * {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}

/* ============ MOBILE VIEWPORT FIXES ============ */
@media (max-width: 768px) {
  /* Fix pour les hauteurs sur mobile */
  .mobile-full-height {
    height: 100vh;
    height: -webkit-fill-available;
  }
  
  /* Fix pour le clavier virtuel sur mobile */
  .mobile-input-container {
    padding-bottom: env(keyboard-inset-height, 0);
  }
}

/* ============ RESPONSIVE UTILITIES ============ */
/* Classes utilitaires pour mobile */
.mobile-hidden {
  @media (max-width: 768px) {
    display: none !important;
  }
}

.mobile-only {
  display: none;
  
  @media (max-width: 768px) {
    display: block;
  }
}

.desktop-only {
  @media (max-width: 768px) {
    display: none !important;
  }
}

/* ============ MOBILE SAFE AREAS (iPhone X+) ============ */
@media (max-width: 768px) {
  .mobile-safe-area {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .mobile-safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
}

@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';